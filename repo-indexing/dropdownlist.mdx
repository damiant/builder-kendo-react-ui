# DropDownList Components

## Overview

### Purpose
Use this component to generate dropdown list functionality

### When to Use
The DropDownList component is ideal for scenarios where users need to select a single value from a predefined list of options. Use this component when you need to:

- Provide a space-efficient way to display multiple options without taking up screen real estate
- Allow users to select one item from a list of predefined values
- Replace native HTML select elements with enhanced functionality and styling
- Implement filterable dropdown selections for better user experience with large datasets
- Create form inputs that need validation, custom rendering, and accessibility features
- Build responsive interfaces that adapt to different screen sizes with mobile-friendly popups
- Implement dropdown selections with virtual scrolling for performance with large data sets
- Provide grouped data selections with visual separators and headers

### Architecture
**No Coupling**: This is a standalone component that can be used independently. The DropDownList component encapsulates all its functionality within a single, self-contained element that manages its own state, popup, and interactions.

## Components

### DropDownList {Standalone Component}
A comprehensive dropdown selection component that provides enhanced functionality over native HTML select elements.

**Purpose:** Enables users to select a single value from a dropdown list with advanced features like filtering, virtual scrolling, custom rendering, and adaptive mobile support.

**Interface:**
```typescript
interface DropDownListProps extends FormComponentProps {
  // Data and Value Configuration
  data?: any[]; // Array of items to display in the dropdown
  value?: any; // The currently selected value
  defaultValue?: any; // Initial value for uncontrolled usage
  defaultItem?: any; // Text for empty state (e.g., "Select an item")
  
  // Data Field Configuration
  textField?: string; // Property name for display text in object data
  dataItemKey?: string; // Unique key property for object comparison
  valueMap?: (value: any) => any; // Transform value for form submission
  
  // Interaction and State
  opened?: boolean; // Control popup open/closed state
  disabled?: boolean; // Disable user interaction
  loading?: boolean; // Show loading indicator
  
  // Filtering and Search
  filterable?: boolean; // Enable search/filter functionality
  filter?: string; // Current filter text (controlled)
  delay?: number; // Search delay in milliseconds (default: 300)
  ignoreCase?: boolean; // Case-insensitive search (default: true)
  focusedItemIndex?: (data: any, inputText: string, textField?: string) => number;
  
  // Styling and Appearance
  className?: string; // Additional CSS classes
  style?: React.CSSProperties; // Inline styles
  size?: null | 'small' | 'medium' | 'large'; // Component size (default: 'medium')
  rounded?: null | 'small' | 'medium' | 'large' | 'full'; // Border radius (default: 'medium')
  fillMode?: null | 'solid' | 'flat' | 'outline'; // Visual style (default: 'solid')
  iconClassName?: string; // CSS classes for expand icon
  svgIcon?: SVGIcon; // Custom SVG icon
  
  // Accessibility
  id?: string; // Component identifier
  name?: string; // Form field name
  title?: string; // Tooltip text
  ariaLabel?: string; // Accessible label
  ariaLabelledBy?: string; // Reference to labeling element
  ariaDescribedBy?: string; // Reference to description element
  tabIndex?: number; // Tab order
  accessKey?: string; // Keyboard shortcut
  dir?: string; // Text direction ('ltr' | 'rtl')
  
  // Form Integration
  label?: string; // Floating label text
  required?: boolean; // Mark as required field
  validationMessage?: string; // Error message
  validityStyles?: boolean; // Apply validation styling
  
  // Popup Configuration
  popupSettings?: DropDownsPopupSettings; // Popup behavior and styling
  adaptive?: boolean; // Mobile-optimized popup (default: false)
  adaptiveTitle?: string; // Mobile popup title
  adaptiveSubtitle?: string; // Mobile popup subtitle
  
  // Virtual Scrolling
  virtual?: VirtualizationSettings; // Enable virtual scrolling for large datasets
  
  // Grouping
  groupField?: string; // Property name for grouping items
  groupMode?: string; // Grouping visualization mode
  
  // Navigation and Behavior
  leftRightKeysNavigation?: boolean; // Enable left/right arrow navigation (default: true)
  skipDisabledItems?: boolean; // Skip disabled items in navigation (default: true)
  
  // Custom Rendering
  itemRender?: (li: React.ReactElement<HTMLLIElement>, itemProps: ListItemProps) => React.ReactNode;
  valueRender?: (element: React.ReactElement<HTMLSpanElement>, value: any) => React.ReactNode;
  listNoDataRender?: (element: React.ReactElement<HTMLDivElement>) => React.ReactNode;
  groupHeaderItemRender?: (li: React.ReactElement<HTMLLIElement>, itemProps: ListGroupItemProps) => React.ReactNode;
  groupStickyHeaderItemRender?: (div: React.ReactElement<HTMLDivElement>, stickyHeaderProps: GroupStickyHeaderProps) => React.ReactNode;
  header?: React.ReactNode; // Custom header content
  footer?: React.ReactNode; // Custom footer content
  
  // Event Handlers
  onChange?: (event: DropDownListChangeEvent) => void;
  onOpen?: (event: DropDownListOpenEvent) => void;
  onClose?: (event: DropDownListCloseEvent) => void;
  onFocus?: (event: DropDownListFocusEvent) => void;
  onBlur?: (event: DropDownListBlurEvent) => void;
  onFilterChange?: (event: DropDownListFilterChangeEvent) => void;
  onPageChange?: (event: DropDownListPageChangeEvent) => void;
}
```

**Usage Example:**
```tsx
import { DropDownList } from '@progress/kendo-react-dropdowns';

// Basic string array usage
function BasicDropdown() {
  const [value, setValue] = React.useState('');
  
  return (
    <DropDownList
      data={['Apple', 'Orange', 'Banana', 'Grape']}
      value={value}
      onChange={(event) => setValue(event.target.value)}
      placeholder="Select a fruit"
    />
  );
}

// Advanced object data usage
function AdvancedDropdown() {
  const [selectedItem, setSelectedItem] = React.useState(null);
  const data = [
    { id: 1, name: 'Product A', category: 'Electronics' },
    { id: 2, name: 'Product B', category: 'Electronics' },
    { id: 3, name: 'Product C', category: 'Clothing' }
  ];
  
  return (
    <DropDownList
      data={data}
      textField="name"
      dataItemKey="id"
      value={selectedItem}
      onChange={(event) => setSelectedItem(event.target.value)}
      filterable={true}
      label="Select Product"
      size="large"
      fillMode="outline"
      adaptive={true}
    />
  );
}
```

## Integration Patterns

### Basic Form Integration
```tsx
import { DropDownList } from '@progress/kendo-react-dropdowns';
import { Button } from '@progress/kendo-react-buttons';

function BasicForm() {
  const [country, setCountry] = React.useState('');
  const countries = ['United States', 'Canada', 'Mexico', 'United Kingdom'];
  
  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('Selected country:', country);
  };
  
  return (
    <form onSubmit={handleSubmit}>
      <DropDownList
        data={countries}
        value={country}
        onChange={(event) => setCountry(event.target.value)}
        label="Country"
        required={true}
        defaultItem="Select a country"
      />
      <Button type="submit">Submit</Button>
    </form>
  );
}
```

### Filterable Large Dataset
```tsx
function FilterableDropdown() {
  const [selectedProduct, setSelectedProduct] = React.useState(null);
  const [products, setProducts] = React.useState([]);
  const [filter, setFilter] = React.useState('');
  
  const handleFilterChange = (event) => {
    setFilter(event.target.value);
    // Simulate API call based on filter
    fetchProducts(event.target.value);
  };
  
  return (
    <DropDownList
      data={products}
      textField="name"
      dataItemKey="id"
      value={selectedProduct}
      onChange={(event) => setSelectedProduct(event.target.value)}
      filterable={true}
      filter={filter}
      onFilterChange={handleFilterChange}
      loading={false}
      placeholder="Search products..."
      virtual={{ pageSize: 50 }}
    />
  );
}
```

### Grouped Data Display
```tsx
function GroupedDropdown() {
  const [selectedEmployee, setSelectedEmployee] = React.useState(null);
  const employees = [
    { id: 1, name: 'John Doe', department: 'Engineering' },
    { id: 2, name: 'Jane Smith', department: 'Engineering' },
    { id: 3, name: 'Bob Johnson', department: 'Marketing' },
    { id: 4, name: 'Alice Brown', department: 'Marketing' }
  ];
  
  return (
    <DropDownList
      data={employees}
      textField="name"
      dataItemKey="id"
      groupField="department"
      value={selectedEmployee}
      onChange={(event) => setSelectedEmployee(event.target.value)}
      label="Select Employee"
      groupHeaderItemRender={(li, itemProps) => (
        <li className="group-header">
          <strong>{itemProps.dataItem}</strong>
        </li>
      )}
    />
  );
}
```

### Custom Rendering and Mobile Adaptive
```tsx
function CustomDropdown() {
  const [selectedUser, setSelectedUser] = React.useState(null);
  const users = [
    { id: 1, name: 'John Doe', email: 'john@example.com', avatar: 'path/to/avatar1.jpg' },
    { id: 2, name: 'Jane Smith', email: 'jane@example.com', avatar: 'path/to/avatar2.jpg' }
  ];
  
  return (
    <DropDownList
      data={users}
      textField="name"
      dataItemKey="id"
      value={selectedUser}
      onChange={(event) => setSelectedUser(event.target.value)}
      adaptive={true}
      adaptiveTitle="Select User"
      adaptiveSubtitle="Choose from available users"
      itemRender={(li, itemProps) => (
        <li className="user-item">
          <img src={itemProps.dataItem.avatar} alt="" className="avatar" />
          <div>
            <div className="name">{itemProps.dataItem.name}</div>
            <div className="email">{itemProps.dataItem.email}</div>
          </div>
        </li>
      )}
      valueRender={(element, value) => (
        <span className="selected-user">
          {value && (
            <>
              <img src={value.avatar} alt="" className="mini-avatar" />
              {value.name}
            </>
          )}
        </span>
      )}
    />
  );
}
```

## Component Relationships

### Data Flow
The DropDownList manages its own internal state for popup visibility, filtered data, and selected value. Data flows from props to internal state, and user interactions trigger event callbacks that allow parent components to update the controlled properties.

### Event Handling
- **onChange**: Fired when user selects an item
- **onOpen/onClose**: Fired when popup opens or closes
- **onFilterChange**: Fired when user types in filter input
- **onFocus/onBlur**: Standard focus events for form integration
- **onPageChange**: Fired during virtual scrolling

## Best Practices

### Usage Guidelines
- Always provide a `textField` when using object data to specify which property should be displayed
- Use `dataItemKey` with object data for proper item comparison and selection tracking
- Implement `filterable` for datasets with more than 10-15 items to improve user experience
- Set appropriate `defaultItem` text to guide users on what to select
- Use virtual scrolling with `virtual` prop for datasets larger than 100 items

### Accessibility
- Always provide descriptive `ariaLabel` or associate with a label using `ariaLabelledBy`
- Use `ariaDescribedBy` to reference error messages or help text
- Ensure sufficient color contrast for custom rendered items
- Test keyboard navigation (Arrow keys, Enter, Escape)
- Verify screen reader compatibility with custom `itemRender` functions

### Performance
- Enable virtual scrolling for large datasets (>100 items) using the `virtual` prop
- Implement debounced filtering with `delay` prop to reduce API calls
- Use `dataItemKey` for efficient object comparison instead of reference equality
- Consider lazy loading data with `onFilterChange` for very large datasets
- Minimize custom rendering complexity to maintain smooth scrolling

## Common Patterns

### Form Validation Integration
```tsx
function ValidatedDropdown() {
  const [value, setValue] = React.useState('');
  const [isValid, setIsValid] = React.useState(true);
  const options = ['Option 1', 'Option 2', 'Option 3'];
  
  const handleChange = (event) => {
    const newValue = event.target.value;
    setValue(newValue);
    setIsValid(!!newValue); // Simple required validation
  };
  
  return (
    <DropDownList
      data={options}
      value={value}
      onChange={handleChange}
      label="Required Selection"
      required={true}
      validationMessage={!isValid ? 'This field is required' : ''}
      className={!isValid ? 'k-invalid' : ''}
    />
  );
}
```

### Cascading Dropdowns
```tsx
function CascadingDropdowns() {
  const [selectedCategory, setSelectedCategory] = React.useState(null);
  const [selectedProduct, setSelectedProduct] = React.useState(null);
  const [products, setProducts] = React.useState([]);
  
  const categories = [
    { id: 1, name: 'Electronics' },
    { id: 2, name: 'Clothing' }
  ];
  
  React.useEffect(() => {
    if (selectedCategory) {
      // Fetch products for selected category
      const categoryProducts = getProductsByCategory(selectedCategory.id);
      setProducts(categoryProducts);
      setSelectedProduct(null); // Reset product selection
    }
  }, [selectedCategory]);
  
  return (
    <div>
      <DropDownList
        data={categories}
        textField="name"
        dataItemKey="id"
        value={selectedCategory}
        onChange={(event) => setSelectedCategory(event.target.value)}
        label="Category"
        defaultItem="Select a category"
      />
      
      <DropDownList
        data={products}
        textField="name"
        dataItemKey="id"
        value={selectedProduct}
        onChange={(event) => setSelectedProduct(event.target.value)}
        label="Product"
        defaultItem="Select a product"
        disabled={!selectedCategory}
      />
    </div>
  );
}
```

### Real-time Search with API
```tsx
function SearchableDropdown() {
  const [value, setValue] = React.useState(null);
  const [data, setData] = React.useState([]);
  const [loading, setLoading] = React.useState(false);
  const [filter, setFilter] = React.useState('');
  
  const searchUsers = React.useCallback(
    debounce(async (searchTerm) => {
      if (searchTerm.length >= 2) {
        setLoading(true);
        try {
          const users = await api.searchUsers(searchTerm);
          setData(users);
        } catch (error) {
          console.error('Search failed:', error);
        } finally {
          setLoading(false);
        }
      } else {
        setData([]);
      }
    }, 300),
    []
  );
  
  const handleFilterChange = (event) => {
    const filterValue = event.target.value;
    setFilter(filterValue);
    searchUsers(filterValue);
  };
  
  return (
    <DropDownList
      data={data}
      textField="displayName"
      dataItemKey="id"
      value={value}
      onChange={(event) => setValue(event.target.value)}
      filterable={true}
      filter={filter}
      onFilterChange={handleFilterChange}
      loading={loading}
      placeholder="Type to search users..."
      listNoDataRender={() => (
        <div className="no-data">
          {filter.length < 2 ? 'Type at least 2 characters to search' : 'No users found'}
        </div>
      )}
    />
  );
}
```
